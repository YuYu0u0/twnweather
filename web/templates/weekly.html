{% extends 'base.html' %}
{% load static %}
{% block title %}台灣氣象預報網{% endblock %}
{% block content %}
<form method="post" action="{% url 'weekly_report' %}">
    <label for="city">請輸入縣市:</label>
    <select name="city" class="select" id="city">
        <option value="台北市" {% if city == '台北市' %}selected{% endif %}>台北市</option>
        <option value="新北市" {% if city == '新北市' %}selected{% endif %}>新北市</option>
        <option value="桃園市" {% if city == '桃園市' %}selected{% endif %}>桃園市</option>
        <option value="新竹縣" {% if city == '新竹縣' %}selected{% endif %}>新竹縣</option>
        <option value="新竹市" {% if city == '新竹市' %}selected{% endif %}>新竹市</option>
        <option value="苗栗縣" {% if city == '苗栗縣' %}selected{% endif %}>苗栗縣</option>
        <option value="台中市" {% if city == '台中市' %}selected{% endif %}>台中市</option>
        <option value="彰化縣" {% if city == '彰化縣' %}selected{% endif %}>彰化縣</option>
        <option value="雲林縣" {% if city == '雲林縣' %}selected{% endif %}>雲林縣</option>
        <option value="嘉義縣" {% if city == '嘉義縣' %}selected{% endif %}>嘉義縣</option>
        <option value="嘉義市" {% if city == '嘉義市' %}selected{% endif %}>嘉義市</option>
        <option value="台南市" {% if city == '台南市' %}selected{% endif %}>台南市</option>
        <option value="高雄市" {% if city == '高雄市' %}selected{% endif %}>高雄市</option>
        <option value="屏東縣" {% if city == '屏東縣' %}selected{% endif %}>屏東縣</option>
        <option value="基隆市" {% if city == '基隆市' %}selected{% endif %}>基隆市</option>
        <option value="南投縣" {% if city == '南投縣' %}selected{% endif %}>南投縣</option>
        <option value="宜蘭縣" {% if city == '宜蘭縣' %}selected{% endif %}>宜蘭縣</option>
        <option value="花蓮縣" {% if city == '花蓮縣' %}selected{% endif %}>花蓮縣</option>
        <option value="台東縣" {% if city == '台東縣' %}selected{% endif %}>台東縣</option>
        <option value="澎湖縣" {% if city == '澎湖縣' %}selected{% endif %}>澎湖縣</option>
        <option value="金門縣" {% if city == '金門縣' %}selected{% endif %}>金門縣</option>
        <option value="連江縣" {% if city == '連江縣' %}selected{% endif %}>連江縣</option>
    </select>
    <button type="submit">顯示選擇</button>
</form>

<div class="main-content__wrapper">
    {% if data %}
    <h2>{{city}}一周天氣預報</h2>
    <table>
        <thead>
            <tr>
                <th>日期</th>
                <th>時間段</th>
                <th>最低溫度 (°C)</th>
                <th>最高溫度 (°C)</th>
                <th>天氣</th>
                <th>降雨機率 (%)</th>
            </tr>
        </thead>
        <tbody>
            {% for date, periods in data.items %}
            <tr>
                <td rowspan="2">{{ date }}</td>
                <td>日</td>
                <td>{{ periods.day.minT }}</td>
                <td>{{ periods.day.maxT }}</td>
                <td>{{ periods.day.weather }}</td>
                <td>{{ periods.day.PoP12h }}</td>
            </tr>
            <tr>
                <td>夜</td>
                <td>{{ periods.night.minT }}</td>
                <td>{{ periods.night.maxT }}</td>
                <td>{{ periods.night.weather }}</td>
                <td>{{ periods.night.PoP12h }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <h2>請選擇縣市</h2>
    {% endif %}
</div>
{% endblock %}
